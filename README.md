# Distributed Logging System

## Overview

The Distributed Logging System is designed to facilitate efficient logging, storage, and retrieval of logs generated by various services in a distributed environment. It provides robust API endpoints for filtering, paginating, and viewing logs with an integrated UI to display the logs in real time. The system includes authentication, dynamic filtering, and detailed log management capabilities.

## Features

- **Bearer Token Authentication**: Secure access to all API endpoints.
- **Log Storage**: Logs are stored efficiently in a relational database.
- **Filtering**: Filter logs by service, level, start time, and end time.
- **Pagination**: Handle large datasets with paginated API responses and UI.
- **UI Integration**: A clean and user-friendly interface for displaying logs.
- **Log Details Popup**: View detailed log entries in a modal popup directly from the UI.
- **Error Handling**: Comprehensive error handling for API requests and UI operations.

## API Endpoints

### Base URL

`https://localhost:7136/v1`

### Authentication

#### Login
```
POST /auth/login
```
**Request Body:**
```json
{
  "username": "<your-username>", use admin
  "password": "<your-password>" use 1234
}
```
**Response:**
```json
{
  "token": "<Bearer-Token>"
}
```

### Logs Management

#### Retrieve Logs
```
GET /logs
```
**Query Parameters:**
- `service` (optional): Filter logs by service name.
- `level` (optional): Filter logs by level (info, warning, error).
- `startTime` (optional): Start date-time for filtering logs.
- `endTime` (optional): End date-time for filtering logs.
- `page` (optional, default=1): Page number for pagination.
- `page_size` (optional, default=5): Number of logs per page.

**Response:**
```json
{
  "totalCount": <total-logs>,
  "logs": [
    {
      "service": "<service-name>",
      "level": "<log-level>",
      "message": "<log-message>",
      "timestamp": "<timestamp>"
    },
    ...
  ]
}
```

## UI Functionality

### Log Table

- Displays logs fetched from the API.
- Includes filters for service, level, start date, and end date.
- Supports pagination for large datasets.

### Log Details Modal

- Click on any log row to view detailed information in a popup modal.

## Setup Instructions

### Prerequisites

1. Install .NET 6.0 or higher.
2. Set up a relational database (e.g., SQL Server).
3. Install Node.js and Angular CLI for the frontend.

### Backend Setup

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd <repository-folder>
   ```

2. Restore dependencies:
   ```bash
   dotnet restore
   ```

3. Update the `appsettings.json` file:
   - Set the connection string for your database.
   - Configure other necessary settings.

4. Run the application:
   ```bash
   dotnet run
   ```

### Frontend Setup

1. Navigate to the `client` directory:
   ```bash
   cd client
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Start the Angular development server:
   ```bash
   ng serve
   ```

4. Access the application at `http://localhost:4200`.

## Testing

### Backend Tests

1. Run unit tests for controllers and services:
   ```bash
   dotnet test
   ```

### Frontend Tests

1. Run Angular unit tests:
   ```bash
   ng test
   ```

## Folder Structure

### Backend
- `Controllers/`: API controllers (e.g., `LogsController`, `AuthController`).
- `Services/`: Business logic services.
- `Models/`: Data models and DTOs.
- `Repositories/`: Database interaction logic.

### Frontend
- `src/app/components/`: Angular components (e.g., `log-list`).
- `src/app/services/`: Angular services for API interaction.
- `src/app/models/`: Angular models (e.g., `LogEntry`).


## License

This project is made by Eng. Mohamed Fawzy (.NET Developer) for (Nano Health Suite - 312, Al Owais Building, Port Saeed Deira, Dubai) software company based on their request.

## Contact Information

Mohamed Fawzy
+201095194149
mehofawzy@outlook.com
linkedin.com/in/mehofwzy
